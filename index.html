<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beitrittserklärung PDF</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            font-size: 16px;
        }
    </style>
</head>
<body>

    <h1>Beitrittserklärung PDF</h1>
    <button id="download-pdf">PDF herunterladen</button>

    <script>
        document.getElementById('download-pdf').addEventListener('click', async () => {
            const { PDFDocument, rgb } = PDFLib;
            const pdfDoc = await PDFDocument.create();
            const page = pdfDoc.addPage([600, 800]);

            // Definierte Ränder für das gesamte Dokument
            const marginLeft = 50;
            const marginTop = 750;
	    const fieldspace = 265; //Abstand zwischen den bearbeitbaren Feldern
            const textWidth = page.getWidth() - 2 * marginLeft; // Breite des Textbereichs
            let currentY = marginTop;

            // Titel und Text für die Beitrittserklärung
            page.drawText('Kath. Jugend Neuengrün-Schlegelshaid', {
                x: page.getWidth() / 2 - 150,
                y: currentY,
                size: 16,
                color: rgb(0, 0, 0),
                font: await pdfDoc.embedFont(PDFLib.StandardFonts.HelveticaBold)
            });

            currentY -= 20; // Abstand nach Titel
            page.drawText('Beitrittserklärung', {
                x: page.getWidth() / 2 - 70,
                y: currentY,
                size: 14,
                color: rgb(0, 0, 0),
                font: await pdfDoc.embedFont(PDFLib.StandardFonts.HelveticaBold)
            });

            currentY -= 20; // Abstand nach Untertitel
            page.drawText(`Hiermit erkläre ich meinen Beitritt zur Kath. Jugend Neuengrün-Schlegelshaid und bin gleichzeitig damit einverstanden, dass der Verein meine unten angegebenen Daten, wie z.B. Vor- und Zuname, Geburtstag usw., sowie Ehrungen/Auszeichnungen und Fotografien, veröffentlichen darf. Dieser Einwilligung kann ich jederzeit widersprechen.`, {
                x: marginLeft,
                y: currentY,
                size: 12,
                color: rgb(0, 0, 0),
                maxWidth: textWidth
            });

            // Platz für persönliche Daten
            currentY -= 110;
            const fields = [
                { name: 'Vorname', x: marginLeft , y: currentY },
                { name: 'Name', x: marginLeft, y: currentY - 30 },
                { name: 'Geburtsdatum', x: marginLeft , y: currentY - 60},
                { name: 'Straße', x: marginLeft , y: currentY - 90 },
                { name: 'PLZ/Wohnort', x: marginLeft , y: currentY - 120 },
                { name: 'Telefon', x: marginLeft + fieldspace, y: currentY  },
                { name: 'E-Mail', x: marginLeft + fieldspace , y: currentY - 30 },
                { name: 'Ort/Datum', x: marginLeft + fieldspace, y: currentY - 60 },
                { name: 'Unterschrift', x: marginLeft + fieldspace, y: currentY - 90 }
            ];

            // Füge bearbeitbare Textfelder hinzu
            fields.forEach(field => {
                const inputField = pdfDoc.getForm().createTextField(field.name);
                inputField.addToPage(page, {
                    x: field.x + 95, // Position für das Textfeld
                    y: field.y,
                    width: 130,
                    height: 20,
                });
                inputField.setFontSize(12);
                inputField.setText(''); // Platz für Eingabe
            });

            // SEPA-Lastschriftmandat
            currentY -= 150; // Position anpassen
            page.drawText('Erteilung eines SEPA-Lastschriftmandats', {
                x: marginLeft,
                y: currentY,
                size: 14,
                color: rgb(0, 0, 0),
                font: await pdfDoc.embedFont(PDFLib.StandardFonts.HelveticaBold)
            });

            currentY -= 30; // Abstand anpassen
            const sepaText = `Gläubiger-ID: DE50ZZZ00000431398   Mandatsreferenznummer: Mitgliedsnummer

Ich ermächtige die Kath. Jugend Neuengrün-Schlegelshaid den Jahresbeitrag von momentan 7.-- € (Fälligkeit: jeweils Anfang Januar) von meinem Konto mittels Lastschrift einzuziehen. Zugleich weise ich mein Kreditinstitut an, die von der Kath. Jugend Neuengrün-Schlegelshaid, auf mein Konto gezogenen Lastschriften einzulösen.

Hinweis: Ich kann innerhalb von acht Wochen, beginnend mit dem Belastungsdatum, die Erstattung des belasteten Betrages verlangen. Es gelten dabei die mit meinem Kreditinstitut vereinbarten Bedingungen.`;

            page.drawText(sepaText, {
                x: marginLeft,
                y: currentY,
                size: 12,
                color: rgb(0, 0, 0),
                maxWidth: textWidth
            });

            // Platz für Bankinformationen
            currentY -= 200; // Position anpassen
            const bankFields = [
                { name: 'Kontonummer', x: 0, y: currentY },
                { name: 'Kontoinhaber', x: 0, y: currentY - 30 },
                { name: 'Bankleitzahl', x: 0, y: currentY - 60 },
                { name: 'Kreditinstitut', x: 0, y: currentY - 90 },
                { name: 'IBAN', x: fieldspace, y: currentY  },
                { name: 'BIC', x: fieldspace, y: currentY - 30 },
                { name: 'Unterschrift Kontoinhaber', x: fieldspace, y: currentY - 60 }
            ];

            // Füge bearbeitbare Textfelder für Bankinformationen hinzu
            bankFields.forEach(field => {
                const inputField = pdfDoc.getForm().createTextField(field.name);
                inputField.addToPage(page, {
                    x: field.x + 145,
                    y: field.y,
                    width: 130,
                    height: 20,
                });
                inputField.setFontSize(12);
                inputField.setText(''); // Platz für Eingabe
            });

            // PDF speichern
            const pdfBytes = await pdfDoc.save();
            const blob = new Blob([pdfBytes], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'Beitrittserklaerung.pdf';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        });
    </script>

</body>
</html>

